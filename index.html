<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>FairPrice | Check if a Contractor Quote Is Fair Before You Overpay</title>
  <meta name="description" content="Upload one contractor quote and get a fairness breakdown in seconds using official U.S. labor benchmark data. Check pricing before you sign." />
  <meta name="keywords" content="contractor quote check,is this contractor quote fair,contractor overcharging,home repair quote checker,roof quote check,bathroom remodel estimate,kitchen remodel quote,HVAC replacement quote,plumbing quote check,electrical quote estimate" />
  <meta name="robots" content="index,follow" />
  <meta name="theme-color" content="#07182c" />

  <!-- Open Graph -->
  <meta property="og:title" content="FairPrice | Check if a Contractor Quote Is Fair" />
  <meta property="og:description" content="Upload your quote. Get a fairness breakdown in seconds before you overpay." />
  <meta property="og:type" content="website" />

  <style>
    :root{
      --bg: #051427;
      --bg2:#061a31;
      --panel:#0b213a;
      --panel2:#0a1d34;
      --stroke:rgba(165,196,229,.2);
      --text:#e8f2ff;
      --muted:#9fb8d3;
      --accent:#69d9ec;
      --accent2:#7ce8aa;
      --btnText:#07273f;
      --ok:#9ef7bf;
      --warn:#ffd8a8;
      --bad:#ffb4b4;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1000px 450px at 15% -20%, #10416f 0%, transparent 55%),
        linear-gradient(180deg,var(--bg2),var(--bg));
      min-height:100vh;
      line-height:1.45;
    }

    .wrap{
      width:min(1180px, 92vw);
      margin:34px auto 50px;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      border:1px solid var(--stroke);
      background:rgba(8,25,45,.55);
      border-radius:999px;
      padding:12px 16px;
      margin-bottom:26px;
      backdrop-filter:blur(6px);
    }

    .brand{
      display:flex;
      align-items:center;
      gap:14px;
      font-weight:800;
      font-size:40px;
      letter-spacing:.2px;
    }

    .dot{
      width:48px;height:48px;border-radius:14px;
      background:linear-gradient(145deg,var(--accent),var(--accent2));
      box-shadow:0 10px 24px rgba(105,217,236,.28);
      flex:0 0 auto;
    }

    .chip{
      border:1px solid var(--stroke);
      border-radius:999px;
      padding:10px 16px;
      color:#d1e6ff;
      font-weight:600;
      font-size:18px;
      white-space:nowrap;
    }

    h1{
      margin:0 0 8px;
      font-size:clamp(42px,6vw,72px);
      line-height:1.03;
      letter-spacing:-.02em;
    }

    .sub{
      margin:0;
      color:var(--accent);
      font-size:clamp(22px,2.2vw,35px);
      font-weight:800;
    }

    .lead{
      margin:12px 0 0;
      color:#d2e4ff;
      font-size:clamp(20px,1.9vw,31px);
      max-width:980px;
    }

    .trust{
      display:flex;flex-wrap:wrap;gap:10px;
      margin-top:16px;
    }
    .trust span{
      border:1px solid var(--stroke);
      border-radius:999px;
      padding:8px 12px;
      background:rgba(8,25,45,.55);
      color:#d7e9ff;
      font-size:14px;
      font-weight:600;
    }

    .panel{
      margin-top:24px;
      padding:22px;
      background:linear-gradient(180deg,var(--panel),var(--panel2));
      border:1px solid var(--stroke);
      border-radius:24px;
      box-shadow:0 22px 60px rgba(0,0,0,.35);
    }

    .grid{
      display:grid;
      grid-template-columns:1.25fr .75fr;
      gap:14px;
    }

    .field label{
      display:block;
      margin:0 0 10px;
      font-size:31px;
      font-weight:800;
      color:#edf5ff;
    }

    .input{
      width:100%;
      height:66px;
      border-radius:16px;
      border:1px solid var(--stroke);
      background:#07182c;
      color:#e9f4ff;
      padding:0 16px;
      font-size:23px;
      outline:none;
    }
    .input::placeholder{color:#7f9dbc}

    .file-shell{
      display:flex;align-items:center;gap:12px;
      height:66px;
      border-radius:16px;
      border:1px solid var(--stroke);
      background:#07182c;
      padding:8px 10px;
    }

    .file-shell input[type=file]{
      display:none;
    }

    .file-btn{
      border:0;
      border-radius:10px;
      padding:10px 14px;
      cursor:pointer;
      background:#f2f7ff;
      color:#102943;
      font-weight:700;
      font-size:16px;
    }

    .file-name{
      color:#c9dff4;
      font-size:19px;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }

    .cta{
      margin-top:14px;
      width:100%;
      height:72px;
      border:0;
      border-radius:18px;
      font-weight:900;
      font-size:37px;
      color:var(--btnText);
      background:linear-gradient(90deg,var(--accent),var(--accent2));
      cursor:pointer;
      transition:transform .12s ease, filter .12s ease;
    }

    .cta:hover{transform:translateY(-1px);filter:brightness(1.03)}
    .cta:disabled{opacity:.7;cursor:not-allowed;transform:none}

    .pricing{
      margin-top:14px;
      color:#d8e9ff;
      font-size:33px;
      font-weight:500;
    }

    .pricing strong{font-weight:900;color:white}

    .checkout-row{
      margin-top:12px;
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
    }

    .buy{
      display:block;
      text-align:center;
      text-decoration:none;
      border-radius:12px;
      border:1px solid var(--stroke);
      padding:12px 14px;
      font-weight:800;
      font-size:17px;
      color:#0d2740;
      background:linear-gradient(90deg,#c7ecf4,#cdf6de);
    }

    .note{
      margin-top:12px;
      border:1px dashed var(--stroke);
      border-radius:16px;
      padding:12px 14px;
      color:#b7cde5;
      font-size:16px;
    }

    .result{
      margin-top:14px;
      border:1px solid var(--stroke);
      border-radius:16px;
      background:rgba(6,22,40,.65);
      padding:14px;
      display:none;
    }

    .result h3{
      margin:0 0 8px;
      font-size:24px;
      line-height:1.2;
    }

    .badge{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      font-size:13px;
      font-weight:800;
      letter-spacing:.2px;
      margin-bottom:8px;
    }

    .badge.ok{background:rgba(68,214,120,.16); color:var(--ok); border:1px solid rgba(68,214,120,.35)}
    .badge.warn{background:rgba(255,170,80,.16); color:var(--warn); border:1px solid rgba(255,170,80,.35)}
    .badge.bad{background:rgba(255,98,98,.16); color:var(--bad); border:1px solid rgba(255,98,98,.35)}

    .result p{margin:6px 0;color:#d3e6ff}
    .result ul{margin:8px 0 0 18px;color:#e7f3ff}
    .result li{margin:6px 0}

    .keywords{
      margin-top:16px;
      display:flex;flex-wrap:wrap;gap:8px;
    }

    .keywords span{
      border:1px solid var(--stroke);
      border-radius:999px;
      padding:8px 12px;
      font-size:14px;
      color:#d6e8ff;
      background:rgba(8,25,45,.5);
    }

    .disclaimer{
      margin-top:16px;
      font-size:15px;
      color:#a8c0db;
    }

    .hidden-seo{
      margin-top:26px;
      border-top:1px solid rgba(165,196,229,.12);
      padding-top:14px;
      color:#b9d0e7;
      font-size:15px;
    }

    .hidden-seo h2{
      margin:0 0 8px;
      font-size:22px;
      color:#dff0ff;
    }

    @media (max-width: 920px){
      .brand{font-size:32px}
      .chip{font-size:15px}
      .grid{grid-template-columns:1fr}
      .field label{font-size:24px}
      .input,.file-shell{height:58px;font-size:18px}
      .cta{height:62px;font-size:26px}
      .pricing{font-size:22px}
      .checkout-row{grid-template-columns:1fr}
    }
  </style>

  <!-- Structured data -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@graph":[
      {
        "@type":"SoftwareApplication",
        "name":"FairPrice",
        "applicationCategory":"BusinessApplication",
        "operatingSystem":"Web",
        "description":"Upload a contractor quote and get a fairness breakdown in seconds using U.S. labor benchmark data."
      },
      {
        "@type":"FAQPage",
        "mainEntity":[
          {
            "@type":"Question",
            "name":"How do I check if a contractor quote is fair?",
            "acceptedAnswer":{"@type":"Answer","text":"Upload your quote and FairPrice compares pricing to labor benchmark data to generate an informational fairness estimate."}
          },
          {
            "@type":"Question",
            "name":"What quote types are checked most often?",
            "acceptedAnswer":{"@type":"Answer","text":"Roofing, bathroom remodels, kitchen remodels, HVAC replacements, plumbing, electrical upgrades, flooring, and painting."}
          }
        ]
      }
    ]
  }
  </script>
</head>

<body>
  <main class="wrap">
    <div class="topbar">
      <div class="brand">
        <span class="dot"></span>
        <span>FairPrice</span>
      </div>
      <div class="chip">Contractor quote check</div>
    </div>

    <section aria-label="Hero">
      <h1>See if a contractor is overcharging you.</h1>
      <p class="sub">Based on official U.S. Bureau of Labor Statistics (BLS) data</p>
      <p class="lead">Upload a quote → get a fairness breakdown in seconds, before you overpay.</p>

      <div class="trust">
        <span>No card needed for preview</span>
        <span>Secure checkout by Stripe</span>
        <span>PDF or image quotes</span>
        <span>Results in seconds</span>
      </div>
    </section>

    <section class="panel" aria-label="Upload quote">
      <form id="quoteForm">
        <div class="grid">
          <div class="field">
            <label>Upload quote (PDF / image)</label>
            <div class="file-shell">
              <label class="file-btn" for="quoteFile">Choose File</label>
              <input id="quoteFile" name="quoteFile" type="file" accept=".pdf,image/*" required />
              <span id="fileName" class="file-name">No file chosen</span>
            </div>
          </div>

          <div class="field">
            <label>Total quoted price</label>
            <input id="totalPrice" name="totalPrice" class="input" type="text" inputmode="decimal" placeholder="e.g., 514.19" required />
          </div>
        </div>

        <button id="analyzeBtn" class="cta" type="submit">Upload Quote → Get Fairness Score</button>
      </form>

      <div class="pricing">
        <strong>Free preview</strong> • $6.99 one report • $17.99 unlimited (30 days, this device)
      </div>

      <div class="checkout-row">
        <a class="buy" href="https://buy.stripe.com/5kQaEP5e12xuf1SgcocV200" target="_blank" rel="noopener noreferrer">Buy 1 Report — $6.99</a>
        <a class="buy" href="https://buy.stripe.com/9B64grcGt4FCg5W0dqcV201" target="_blank" rel="noopener noreferrer">Go Unlimited — $17.99</a>
      </div>

      <div class="note">
        <strong>Important:</strong> BLS/CPI benchmarks are informational estimates by region and scope.  
        Not legal, financial, medical/health, tax, or insurance advice. No guarantees.
      </div>

      <div id="result" class="result" aria-live="polite"></div>

      <div class="keywords" aria-label="Common quote categories">
        <span>Roof replacement quote check</span>
        <span>Bathroom remodel estimate</span>
        <span>Kitchen remodel quote</span>
        <span>HVAC replacement quote</span>
        <span>Plumbing repair estimate</span>
        <span>Electrical panel quote check</span>
        <span>Interior painting estimate</span>
        <span>Flooring installation quote</span>
      </div>

      <p class="disclaimer">
        Disclaimer: Informational estimates only. Use at your own risk.
      </p>
    </section>

    <!-- SEO-supporting content -->
    <section class="hidden-seo">
      <h2>Common quote-check searches</h2>
      <p>
        People often search: “is this contractor quote fair”, “contractor overcharging”, “home repair quote checker”,
        “roof replacement quote check”, “HVAC replacement quote”, and “bathroom remodel estimate”.
      </p>
      <p>
        FairPrice helps you validate quotes before signing so you can negotiate with more confidence and reduce overpayment risk.
      </p>
    </section>
  </main>

  <script>
    const quoteForm = document.getElementById('quoteForm');
    const quoteFile = document.getElementById('quoteFile');
    const fileName = document.getElementById('fileName');
    const totalPrice = document.getElementById('totalPrice');
    const analyzeBtn = document.getElementById('analyzeBtn');
    const resultEl = document.getElementById('result');

    quoteFile.addEventListener('change', () => {
      const f = quoteFile.files?.[0];
      fileName.textContent = f ? f.name : 'No file chosen';
    });

    function escapeHtml(str = '') {
      return String(str)
        .replaceAll('&','&amp;')
        .replaceAll('<','&lt;')
        .replaceAll('>','&gt;')
        .replaceAll('"','&quot;')
        .replaceAll("'",'&#39;');
    }

    function badgeClass(verdict = '') {
      const v = verdict.toLowerCase();
      if (v.includes('fair') || v.includes('within')) return 'ok';
      if (v.includes('high') || v.includes('caution') || v.includes('above')) return 'warn';
      if (v.includes('over') || v.includes('unfair')) return 'bad';
      return 'warn';
    }

    function renderResult(data) {
      const verdict = data.verdict || data.status || 'Preview ready';
      const score = data.fairnessScore ?? data.score ?? null;
      const summary = data.summary || data.message || 'Quote analyzed successfully.';
      const rangeMin = data?.benchmarkRange?.min ?? data?.rangeMin ?? null;
      const rangeMax = data?.benchmarkRange?.max ?? data?.rangeMax ?? null;
      const flags = Array.isArray(data.flags) ? data.flags : (Array.isArray(data.reasons) ? data.reasons : []);

      const badge = `<span class="badge ${badgeClass(verdict)}">${escapeHtml(verdict)}</span>`;
      const scoreLine = score !== null ? `<p><strong>Fairness score:</strong> ${escapeHtml(String(score))}</p>` : '';
      const rangeLine = (rangeMin !== null && rangeMax !== null)
        ? `<p><strong>Estimated fair range:</strong> $${escapeHtml(String(rangeMin))} – $${escapeHtml(String(rangeMax))}</p>`
        : '';

      const flagsHtml = flags.length
        ? `<ul>${flags.map(f => `<li>${escapeHtml(String(f))}</li>`).join('')}</ul>`
        : '';

      resultEl.innerHTML = `
        ${badge}
        <h3>Quote Check Preview</h3>
        ${scoreLine}
        ${rangeLine}
        <p>${escapeHtml(summary)}</p>
        ${flagsHtml}
        <p><strong>Next step:</strong> Purchase a full report for deeper breakdown and recommendations.</p>
      `;
      resultEl.style.display = 'block';
    }

    function renderError(msg) {
      resultEl.innerHTML = `
        <span class="badge bad">Unable to analyze</span>
        <h3>Something went wrong</h3>
        <p>${escapeHtml(msg || 'Please try again.')}</p>
      `;
      resultEl.style.display = 'block';
    }

    quoteForm.addEventListener('submit', async (e) => {
      e.preventDefault();

      const file = quoteFile.files?.[0];
      const total = totalPrice.value?.trim();

      if (!file) return renderError('Please upload a quote file.');
      if (!total) return renderError('Please enter the total quoted price.');

      try {
        analyzeBtn.disabled = true;
        analyzeBtn.textContent = 'Analyzing quote...';

        const fd = new FormData();

        // Include multiple common field names to match existing backend expectations
        fd.append('file', file);
        fd.append('quote', file);
        fd.append('upload', file);

        fd.append('total', total);
        fd.append('price', total);
        fd.append('totalPrice', total);
        fd.append('totalQuotedPrice', total);

        const res = await fetch('/api/analyze', { method: 'POST', body: fd });
        const text = await res.text();

        let data;
        try { data = JSON.parse(text); }
        catch { data = { message: text || 'No JSON response returned.' }; }

        if (!res.ok) {
          return renderError(data.error || data.message || `HTTP ${res.status}`);
        }

        renderResult(data);
      } catch (err) {
        renderError(err?.message || 'Unexpected error.');
      } finally {
        analyzeBtn.disabled = false;
        analyzeBtn.textContent = 'Upload Quote → Get Fairness Score';
      }
    });
  </script>
</body>
</html>
